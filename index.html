<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∏–Ω–æ-–∫–ª—É–± "–û–¥–∏—Å—Å–µ—è"</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .film-grid.loading {
            opacity: 0.5;
            position: relative;
        }

        .film-grid.loading::after {
            content: "–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å–º–æ–≤...";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-weight: bold;
        }

        .error-message {
            color: #d9534f;
            padding: 20px;
            text-align: center;
            border: 1px solid #d9534f;
            border-radius: 5px;
            margin: 20px 0;
        }

        .retry-button {
            background-color: #5bc0de;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<header>
    <div class="header-container">
        <h1>–ö–∏–Ω–æ-–∫–ª—É–± "–û–¥–∏—Å—Å–µ—è"</h1>
        <nav>
            <ul>
                <li><a href="#our-films">–û–±—Å—É–∂–¥–µ–Ω–∏—è</a></li>
                <li><a href="#film-archive">–ê—Ä—Ö–∏–≤</a></li>
                <li><a href="#suggest-film">–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ñ–∏–ª—å–º</a></li>
            </ul>
        </nav>
    </div>
</header>

<main>
    <section id="our-films" class="film-section">
        <p>–ú—ã ‚Äî —Å–±–æ—Ä–∏—â–µ –∫–∏–Ω–æ–º–∞–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é —É—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –¥–µ–±–∞—Ç—ã –æ —Ñ–∏–ª—å–º–∞—Ö. –ù–µ—Ç, –º—ã –Ω–µ —Å–º–æ—Ç—Ä–∏–º –∫–∏–Ω–æ –≤–º–µ—Å—Ç–µ
            (—ç—Ç–æ –≤–∞–º –Ω–µ —Å–µ–∞–Ω—Å –≤ –ø–æ–¥–≤–∞–ª–µ), –º—ã —Å—Ç—Ä–∞—Å—Ç–Ω–æ –µ–≥–æ —Ä–∞–∑–±–∏—Ä–∞–µ–º ‚Äî —Å –∫–æ—Ñ–µ, –≥–æ—Ä—è—á–∏–º–∏ –º–Ω–µ–Ω–∏—è–º–∏ –∏ –∏–Ω–æ–≥–¥–∞ –¥—Ä–∞–º–∞—Ç–∏—á–Ω—ã–º–∏
            –æ—Ü–µ–Ω–∫–∞–º–∏.</p>
    </section>

    <div class="about-us"
         style="font-family: 'Arial', sans-serif; max-width: 700px; margin: 0 auto; padding: 20px; background-color: #f5e6ca; border-radius: 10px; border-left: 4px solid #e6af2e;">
        <h2 style="color: #0f1c2e; text-align: center; margin-bottom: 20px;">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>

        <ul style="padding-left: 20px; color: #333;">
            <li style="margin-bottom: 10px;"><strong>–°–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∏–ª—å–º –¥–æ–º–∞</strong> (—á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É
                –≤–æ–∑–º—É—â–∞—Ç—å—Å—è –≤—Å–ª—É—Ö).
            </li>
            <li style="margin-bottom: 10px;"><strong>–ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –≤ –∫–æ—Ñ–µ–π–Ω—é</strong> ‚Äî –æ–±—Å—É–∂–¥–∞–µ—Ç–µ, —Å–ø–æ—Ä–∏—Ç–µ, —Å—Ç–∞–≤–∏—Ç–µ –æ—Ü–µ–Ω–∫–∏.
            </li>
            <li style="margin-bottom: 20px;"><strong>–§–∏–ª—å–º—ã –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞—à ¬´–¥–∏–∫—Ç–∞—Ç–æ—Ä¬ª</strong> (–Ω–æ –∏–Ω–æ–≥–¥–∞ –æ–Ω —Å–Ω–∏—Å—Ö–æ–¥–∏—Ç –¥–æ
                –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π).
            </li>
        </ul>

        <p style="background-color: #fff; padding: 15px; border-radius: 5px; font-weight: bold;">
            <span style="color: #6d1a36;">–î–µ–Ω—å–≥–∏?</span> –ù–µ—Ç, —Ç–æ–ª—å–∫–æ –≤–∞—à–∞ –ª—é–±–æ–≤—å –∫ –∫–∏–Ω–æ (–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∫—Ä—É–∞—Å—Å–∞–Ω –¥–ª—è
            –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã).
        </p>

        <p style="font-style: italic;">
            <span style="color: #0f1c2e; font-weight: bold;">–ö–∞–∫ –≤—Å—Ç—É–ø–∏—Ç—å?</span> –ü—Ä–æ—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ ‚Äî –º—ã –Ω–µ —Å–µ–∫—Ç–∞, —Ö–æ—Ç—è
            –ø–æ—Å–ª–µ —Ç—Ä–µ—Ç—å–µ–π –≤—Å—Ç—Ä–µ—á–∏ –≤—ã —É–∂–µ –±—É–¥–µ—Ç–µ —è—Ä–æ—Å—Ç–Ω–æ –∑–∞—â–∏—â–∞—Ç—å ¬´–¢–∏—Ç–∞–Ω–∏–∫¬ª –∫–∞–∫ –∞—Ä—Ç—Ö–∞—É—Å.
        </p>

        <div style="margin-top: 20px; padding: 10px; background-color: #0f1c2e; color: #e6af2e; border-radius: 5px;">
            <p style="margin: 0;"><strong>P.S.</strong> –í –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –≤–∞–º —Ä–∞–∑—Ä–µ—à–∞—Ç –≤—ã–±—Ä–∞—Ç—å <em>–ª—é–±–æ–π</em> —Ñ–∏–ª—å–º ‚Äî –¥–∞–∂–µ
                ¬´–ß–µ–ª–æ–≤–µ–∫–∞-–ø–∞—É–∫–∞¬ª –≤ 4K —Å —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–º —Ä–∞–∑–±–æ—Ä–æ–º.</p>
        </div>

        <p style="text-align: center; margin-top: 25px; font-size: 1.2em; color: #6d1a36;">
            <strong>üé¨–î–∞–≤–∞–π—Ç–µ –∂–µ–≤–∞—Ç—å –ø–æ–ø–∫–æ—Ä–Ω –∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å –∫–∏–Ω–æ –Ω–∞ –º–æ–ª–µ–∫—É–ª—ã!üçø</strong>
        </p>

        <div style="text-align: center; padding: 10px;">
            <button id="openModal" class="button">–ù–∞–π—Ç–∏ –Ω–∞—Å</button>
        </div>
    </div>

    <section id="film-archive" class="film-section">
        <h2 class="section-title">–ê—Ä—Ö–∏–≤ –Ω–∞—à–∏—Ö —Ä–∞–±–æ—Ç</h2>

        <div class="video-posters-container">
            <div class="film-poster">
                <a href="https://vk.com/ulysses_club?z=video-199046020_456239058" target="_blank" class="video-link">
                    <img src="images/film-poster-odissea.jpg" alt="–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ñ–∏–ª—å–º" class="poster-image">
                    <div class="play-overlay">
                        <div class="play-button">‚ñ∂</div>
                        <p class="watch-text">—Ö\—Ñ "–ù–µ –Ω–∞–¥–æ –Ω–∏–∫–æ–≥–æ —Å–ø–∞—Å–∞—Ç—å" (2025)</p>
                    </div>
                </a>
            </div>

            <div class="film-poster">
                <a href="https://m.vkvideo.ru/video-199046020_456239055?from=video" target="_blank" class="video-link">
                    <img src="images/nam-four-let.jpg" alt="–í–∏–¥–µ–æ—Ä–æ–ª–∏–∫" class="poster-image">
                    <div class="play-overlay">
                        <div class="play-button">‚ñ∂</div>
                        <p class="watch-text">–ö–∏–Ω–æ–∫–ª—É–±—É –û–¥–∏—Å—Å–µ—è 4 –≥–æ–¥–∞</p>
                    </div>
                </a>
            </div>

            <div class="film-poster">
                <a href="https://m.vkvideo.ru/video-199046020_456239052?from=video" target="_blank" class="video-link">
                    <img src="images/posledniy-kadr.jpg" alt="–í–∏–¥–µ–æ—Ä–æ–ª–∏–∫" class="poster-image">
                    <div class="play-overlay">
                        <div class="play-button">‚ñ∂</div>
                        <p class="watch-text">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–¥—Ä</p>
                    </div>
                </a>
            </div>
        </div>
        <h2 class="section-title">–ò—Å—Ç–æ—Ä–∏—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è</h2>
        <div class="film-grid" id="films-container">
            <!-- –§–∏–ª—å–º—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
            <div class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤...</div>
        </div>
    </section>

    <section id="suggest-film" class="film-section">
        <h2 class="section-title">–ü—Ä–µ–¥–ª–æ–∂–∏ —Ñ–∏–ª—å–º</h2>
        <form id="film-suggestion-form" class="suggestion-form">
            <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞" required>
            <input type="text" placeholder="–ì–æ–¥" required>
            <textarea placeholder="–ü–æ—á–µ–º—É —Å—Ç–æ–∏—Ç –æ–±—Å—É–¥–∏—Ç—å?"></textarea>
            <button type="submit" class="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
        <div id="form-thanks" style="display: none;">
            <p>–°–ø–∞—Å–∏–±–æ! –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–∞—à –≤–∞—Ä–∏–∞–Ω—Ç.</p>
        </div>
    </section>
</main>

<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>–ö–∞–∫ –¥–æ –Ω–∞—Å –¥–æ–±—Ä–∞—Ç—å—Å—è?</h2>
        <p style="font-style: italic; color: #aaa; text-align: left;">
            –ú—ã –∂–∏–≤—ë–º –≥–¥–µ-—Ç–æ –º–µ–∂–¥—É –º–µ—á—Ç–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é. –ù–æ –µ—Å–ª–∏ —Å–µ—Ä—å—ë–∑–Ω–æ...
        </p>
        <ul style="list-style: none; padding-left: 0; margin: 20px auto; max-width: 300px; line-height: 1; color: #333;">
            <li><strong>üìç –ú–µ—Å—Ç–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è:</strong> –≥. –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å, —É–ª. –®–º–∏–¥—Ç–∞, 12. –ö–æ—Ñ–µ–π–Ω—è "–¢–æ–º –°–æ–π–µ—Ä"</li>
            <li><strong>üìû –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏:</strong> +79787363212</li>
            <li><strong>üì± VK:</strong> <a href="https://vk.com/ulysses_club" target="_blank">–ù–∞—à–∞ –≥—Ä—É–ø–ø–∞ –í–ö</a></li>
            <li><strong>üì¢ Telegram:</strong> <a href="https://t.me/ulysses_club" target="_blank">–ù–∞—à –±–æ—Ç</a></li>
        </ul>
        <p style="color: #333; text-align: left;">
            P.S. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥—ë—à—å ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–∫–∞–∂–∏ –ø–∏—Ü—Ü—É. –ú—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª–∏–∫–Ω–µ–º—Å—è –Ω–∞ –∑–∞–ø–∞—Ö.
        </p>
        <a href="https://t.me/ulysses_club" class="telegram-button" target="_blank">
            <img src="images/telegram.png" alt="">
            –ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </a>
    </div>
</div>

<footer>
    <p>¬© 2025 –ö–∏–Ω–æ-–∫–ª—É–±. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. –û–±—ä–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∑–¥–µ—Å—å –∏ –Ω–µ –ø–∞—Ö–Ω–µ—Ç! (—Å)</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        const modal = document.getElementById('modal');
        if (modal) {
            const openModalBtn = document.getElementById('openModal');
            const closeBtn = modal.querySelector('.close');

            openModalBtn?.addEventListener('click', () => modal.style.display = 'block');
            closeBtn?.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (e) => e.target === modal && (modal.style.display = 'none'));
        }

        // –§–æ—Ä–º–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ñ–∏–ª—å–º–∞
        const form = document.getElementById('film-suggestion-form');
        const formThanks = document.getElementById('form-thanks');

        if (form && formThanks) {
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                form.style.display = 'none';
                formThanks.style.display = 'block';
                form.reset();

                setTimeout(() => {
                    form.style.display = 'block';
                    formThanks.style.display = 'none';
                }, 3000);
            });
        }

        // ===== –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∏–ª—å–º–æ–≤ –∏–∑ Google Sheets =====
        async function loadFilmsFromGoogleSheets() {
            const filmsContainer = document.getElementById('films-container');
            if (!filmsContainer) return;

            try {
                filmsContainer.innerHTML = '<div class="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∏–ª—å–º–æ–≤...</div>';

                const sheetId = '1a6EWO5ECaI1OveO4Gy7y9zH5LjFtlm8Alg9iSRP2heE';
                const gid = '0'; // –ò—Å–ø–æ–ª—å–∑—É–µ–º gid –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–∏—Å—Ç–∞
                const url = `https://opensheet.elk.sh/${sheetId}/${gid}`;

                const response = await fetch(url);
                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö');

                const data = await response.json();

                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ –º–∞—Å—Å–∏–≤, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–ª–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ {0: {...}, 1: {...}}
                const filmsArray = Array.isArray(data) ? data : Object.values(data);

                if (filmsArray.length === 0) {
                    filmsContainer.innerHTML = '<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ñ–∏–ª—å–º–∞—Ö</p>';
                    return;
                }

                let html = '';
                filmsArray.forEach(film => {
                    if (!film || !film['–ù–∞–∑–≤–∞–Ω–∏–µ']) return;

                    const rating = parseInt(film['–†–µ–π—Ç–∏–Ω–≥']) || 0;
                    const stars = '‚òÖ'.repeat(Math.min(10, Math.max(0, rating)));
                    const emptyStars = '‚òÜ'.repeat(10 - Math.min(10, Math.max(0, rating)));

                    html += `
                <div class="film-card">
                    <img src="${film['–ü–æ—Å—Ç–µ—Ä URL'] || 'images/default-poster.jpg'}"
                         alt="${film['–ù–∞–∑–≤–∞–Ω–∏–µ']} (${film['–ì–æ–¥']})"
                         class="film-thumbnail"
                         onerror="this.src='images/default-poster.jpg'">
                    <h3>${film['–ù–∞–∑–≤–∞–Ω–∏–µ']} (${film['–ì–æ–¥']})</h3>
                    <p>–û–±—Å—É–∂–¥–µ–Ω–∏–µ ${film['–ù–æ–º–µ—Ä –æ–±—Å—É–∂–¥–µ–Ω–∏—è'] || 'N/A'} (${film['–î–∞—Ç–∞'] || '–¥–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞'})</p>
                    <div class="film-rating">${stars}${emptyStars}</div>
                </div>
                `;
                });

                filmsContainer.innerHTML = html || '<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ —Ñ–∏–ª—å–º–∞—Ö</p>';

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∏–ª—å–º–æ–≤:', error);
                filmsContainer.innerHTML = `
                <div class="error-message">
                    <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª—å–º–æ–≤</p>
                    <p>${error.message}</p>
                    <button class="retry-button" onclick="loadFilmsFromGoogleSheets()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                </div>
            `;
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∏–ª—å–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        loadFilmsFromGoogleSheets();

        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
        let refreshInterval = setInterval(loadFilmsFromGoogleSheets, 300000);

        // –û—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                clearInterval(refreshInterval);
            } else {
                loadFilmsFromGoogleSheets();
                refreshInterval = setInterval(loadFilmsFromGoogleSheets, 300000);
            }
        });
    });
</script>
</body>
</html>